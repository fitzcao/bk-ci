# 资源描述
   ##### 通过buildId获取流水线状态
# method
##### GET

# 应用态
### APIGW请求路径
http://{apigwHost}/v3/apigw-app/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/status
### 后台路径
/openapi/api/apigw-app/v3/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/status
# 用户态
### APIGW请求路径
http://{apigwHost}/v3/apigw-user/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/status
### 后台路径
/openapi/api/apigw-user/v3/projects/{projectId}/pipelines/{pipelineId}/builds/{buildId}/status

# 入参
#### Path参数
|   参数名称   |    参数类型  |  必须  |     参数说明     |
| ------------ | ------------ | ------ | ---------------- |
|   projectId   |   string     |   是   |  项目Id    |
|   pipelineId   |   string     |   是   |  流水线Id    |
|   buildId   |   string     |   是   |  构建ID    |

#### HEADER参数
|   参数名称   |    参数类型  |  必须  |     参数说明     |
| ------------ | ------------ | ------ | ---------------- |
|   X-DEVOPS-UID	   |   string     |   是   |  用户名称    |


#### 应用态Query参数
|   参数名称   |    参数类型  |  必须  |     参数说明     |
| ------------ | ------------ | ------ | ---------------- |
| app_code   | string | 是 | 应用ID(app id)，可以通过 蓝鲸开发者中心 -&gt; 应用基本设置 -&gt; 基本信息 -&gt; 鉴权信息 获取 |
| app_secret | string | 是 | 安全秘钥(app secret)，可以通过 蓝鲸开发者中心 -&gt; 应用基本设置 -&gt; 基本信息 -&gt; 鉴权信息 获取 |

#### 用户态Query参数
|   参数名称   |    参数类型  |  必须  |     参数说明     |
| ------------ | ------------ | ------ | ---------------- |
| access_token	   |   string     |   是   |  用户access_token    |


# 出参
{
    "status": 0,
    "message": "string",
    "data": {
      "id": "string",           // 构建ID
      "userId": "string",       // 启动用户
      "trigger": "string",      // 触发条件
      "buildNum": 0,            // 构建号
      "pipelineVersion": 0,     // 编排文件版本号
      "startTime": 0,           // 开始时间
      "endTime": 0,   // 结束时间
      "status": "string",  // 状态
      "deleteReason": "string",  // 结束原因
      "currentTimestamp": 0,    // 服务器当前时间戳
      "material": [     // 原材料(代码提交信息)
        {
          "aliasName": "string",
          "url": "string",
          "branchName": "string",
          "newCommitId": "string",
          "newCommitComment": "string",
          "commitTimes": 0
        }
      ],
      "queueTime": 0,     // 排队于
      "artifactList": [   // 构件列表
        {
          "name": "string",
          "fullName": "string",
          "path": "string",
          "fullPath": "string",
          "size": 0,
          "folder": true,
          "modifiedTime": 0,
          "artifactoryType": "PIPELINE",
          "properties": [
            {
              "key": "string",
              "value": "string"
            }
          ],
          "appVersion": "string",
          "shortUrl": "string"
        }
      ],
      "remark": "string",    // 备注
      "totalTime": 0,        // 总耗时(秒)
      "executeTime": 0,      // 运行耗时(秒，不包括人工审核时间)
      "buildParameters": [   // 启动参数
        {
          "key": "string",
          "value": "string"
        }
      ],
      "webHookType": "string",   // WebHook类型
      "startType": "string",     // 启动类型(新)
      "variables": {             //流水线运行参数键值对(含自定义变量)
          "key":"string",
          "value":"string"
      },
      "isMobileStart": true,        // 是否是手机启动
      "recommendVersion": "string"        // 是否是手机启动
    }
}

### 状态说明
(```)
流水线状态
SUCCEED("成功", true), // 0 成功
FAILED("失败", true), // 1 失败
CANCELED("取消", true), // 2 取消
RUNNING("运行中", true), // 3 运行中
TERMINATE("终止", true), // 4 终止
REVIEWING("审核中", true), // 5 审核中
REVIEW_ABORT("审核驳回", true), // 6 审核驳回
REVIEW_PROCESSED("审核通过", true), // 7 审核通过
HEARTBEAT_TIMEOUT("心跳超时", true), // 8 心跳超时
PREPARE_ENV("准备环境中", true), // 9 准备环境中
SKIP("跳过", true), // 11 跳过
QUALITY_CHECK_FAIL("质量红线检查失败", true), // 12 质量红线检查失败
QUEUE("排队", true), // 13 排队（新）
LOOP_WAITING("轮循等待", true), // 14 轮循等待 --运行中状态（新）
CALL_WAITING("等待回调", true), // 15 等待回调 --运行中状态（新）
QUEUE_TIMEOUT("排队超时", true), // 17 排队超时
EXEC_TIMEOUT("执行超时", true), // 18 执行超时
QUEUE_CACHE("队列待处理", true), // 19 队列待处理，瞬间状态。只有在启动和取消过程中存在的中间状态
STAGE_SUCCESS("阶段性完成", true), // 22 流水线阶段性完成
(```)


(```)
以下几个是终止态：
SUCCEED("成功", true), // 0 成功
FAILED("失败", true), // 1 失败
CANCELED("取消", true), // 2 取消
TERMINATE("终止", true), // 4 终止
REVIEW_ABORT("审核驳回", true), // 6 审核驳回
HEARTBEAT_TIMEOUT("心跳超时", true), // 8 心跳超时
QUALITY_CHECK_FAIL("质量红线检查失败", true), // 12 质量红线检查失败
QUEUE_TIMEOUT("排队超时", true), // 17 排队超时
EXEC_TIMEOUT("执行超时", true), // 18 执行超时
STAGE_SUCCESS("阶段性完成", true), // 22 流水线阶段性完成
(```)

# 示例
curl -X GET "http://{apigwHost}/v3/apigw-app/builds/${projectId}/${pipelineId}/${buildId}/status?app_code=***&amp;app_secret=***"
